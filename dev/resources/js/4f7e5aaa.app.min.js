$(function(){PANDOX.SYSTEM.init()});var PANDOX=PANDOX||{};PANDOX.SYSTEM=function(){var a=function(){console.log("PANDOX.SYSTEM.init"),PANDOX.FORM.init(),PANDOX.DONATE.init(),PANDOX.UI.init()},b=function(){$("#i-donate-date").datetimepicker({pickTime:!1,useCurrent:!0,language:"pt-br"})},c=function(a){return!a||/ ^ \s * $ /.test(a)};return{init:a,bindDateButton:b,isBlank:c}}(),PANDOX.UI=function(){var a=function(){b(),c()},b=function(){$(".donateNowBtn").click(function(a){a.preventDefault(),d("doar")})},c=function(){$(".donateNowMenuBtn").click(function(a){a.preventDefault(),d("doar"),$(".menu-mobile-btn").click()})},d=function(a){var b=a,c=$("div[name='"+b+"']");$("html,body").animate({scrollTop:c.offset().top},"slow")};return{init:a}}(),PANDOX.FORM=function(){var a=function(){var a=["donate-date","donate-coo","donate-value"];$.each(a,function(a,b){$("#i-"+b).focus(function(){c(b)})})},b=function(a,b){$("#g-"+a).addClass("has-error has-feedback"),$("#ig-"+a).addClass("glyphicon-remove"),$("#h-"+a).hide(),$("#e-"+a).show(),console.log(a),console.log(b),$("#e-"+a).html(b)},c=function(a){$("#g-"+a).removeClass("has-success has-feedback has-error"),$("#ig-"+a).removeClass("glyphicon-ok glyphicon-remove"),$("#h-"+a).show(),$("#e-"+a).html(""),$("#e-"+a).hide()},d=function(a){$("#g-"+a).addClass("has-success has-feedback"),$("#ig-"+a).addClass("glyphicon-ok")};return{clearInput:c,markSuccessOnField:d,init:a,markErrorOnField:b}}(),PANDOX.DONATE=function(){var a=function(){b()},b=function(){$("#donate").click(function(a){a.preventDefault(),$("#donate-loading").show(),$("#donate").hide();var b=$("#i-donate-date").val();PANDOX.SYSTEM.isBlank(b)&&(hasError=!0,PANDOX.FORM.markErrorOnField("donate-date","Data é obrigatória"));var c=$("#i-donate-coo").val();PANDOX.SYSTEM.isBlank(c)&&(hasError=!0,PANDOX.FORM.markErrorOnField("donate-coo","COO é obrigatório"));var d=$("#i-donate-value").val();if(PANDOX.SYSTEM.isBlank(d)&&(hasError=!0,PANDOX.FORM.markErrorOnField("donate-value","Valor é obrigatório")),hasError);else{var e={entity:1,date:b,coo:c,value:d},f=$.ajax({url:"/api/invoice",type:"POST",data:JSON.stringify(e),contentType:"application/json"});f.done(function(a,b,c){$("#account-template").hide().loadTemplate("/conta/sucesso.html",a).fadeIn(1500)}),f.fail(function(a){var b=a.responseJSON;$.each(b,function(a,b){PANDOX.FORM.markErrorOnField(b.field,b.message)}),$("#loading").hide(),$("#btn-submit").show()})}$("#donate-loading").hide(),$("#donate").show()})};return{init:a}}();